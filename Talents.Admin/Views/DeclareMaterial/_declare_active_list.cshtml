@model List<DeclareActive>
@{
	var pageTitle = ViewBag.Title = "历史库";
	var isGongkk = Request["itemKey"] == DeclareKeys.ZisFaz_JiaoxHuod_JiaoxGongkk;
	var isPingb = Request["itemKey"] == DeclareKeys.ZisFaz_JiaoxHuod_JiaoxPingb;
	var declareTargetId = Request["declareTargetId"];
}

<div class="modal-dialog modal-lg">

	<!-- widget -->
	<div class="widget">
		<div class="widget-header">
			<h3><i class="fa fa-paperclip"></i> @pageTitle</h3>
			<div class="btn-group widget-header-toolbar">
				<a href="#" title="关闭" class="btn-borderless" data-dismiss="modal"><i class="fa fa-close"></i></a>
			</div>
		</div>
		<div class="widget-content">

			<!-- Grid -->
			<div class="table-responsive">
				@if (isGongkk)
				{
					<table class="table table-striped table-hover table-dark-header">
						<thead>
							<tr>
								<th>时间</th>
								<th>地点</th>
								<th>班级</th>
								<th>课题/内容</th>
								<th>级别</th>
								<th>组织、单位</th>
							</tr>
						</thead>
						<tbody>
							@foreach (var item in Model)
							{
								<tr>
									<td>
										@item.Date.ToString("yyyy-MM-dd")
									</td>
									<td>
										@item.Location
									</td>
									<td>
										@item.Dynamic1
									</td>
									<td>
										@item.ContentValue
									</td>
									<td>
										@item.Level
									</td>
									<td>
										@item.Dynamic2
									</td>
									<td>
										<a target="_blank" class="btn btn-warning btn-declare" data-url="@Url.Action("DeclareActive", "DeclareMaterial", new {id=item.DeclareActiveId, isDeclare=true, declareTargetId= declareTargetId })" href="#"><i class="fa fa-external-link"></i>申报</a>
									</td>
								</tr>
							}
						</tbody>
					</table>
				}
				else if (isPingb)
				{
					<table class="table table-striped table-hover table-dark-header">
						<thead>
							<tr>
								<th>时间</th>
								<th>地点、班级</th>
								<th>课题/内容</th>
								<th>级别</th>
								<th>组织、单位</th>
							</tr>
						</thead>
						<tbody>
							@foreach (var item in Model)
							{
								<tr>
									<td>
										@item.Date.ToString("yyyy-MM-dd")
									</td>
									<td>
										@item.Location
									</td>
									<td>
										@item.ContentValue
									</td>
									<td>
										@item.Level
									</td>
									<td>
										@item.Dynamic2
									</td>
									<td>
										<a target="_blank" class="btn btn-warning btn-declare" data-url="@Url.Action("DeclareActive", "DeclareMaterial", new {id=item.DeclareActiveId, isDeclare=true, declareTargetId= declareTargetId })" href="#"><i class="fa fa-external-link"></i>申报</a>
									</td>
								</tr>
							}
						</tbody>
					</table>
				}
			</div>
			<!-- end Grid-->

		</div>
		<!-- /widget content -->
	</div>
	<!-- /widget -->

</div>
<script>
	$(function () {

		$('.btn-declare,.btn-cancelDeclare').off('click').on('click', function (e) {
			e.preventDefault();

			var $this = $(this);
			var url = $this.data('url');

			$.post(url, null, function (data, status) {
				popupMessage(data, {
					success: function () {
						loadFrag($this, data);
					}
				});
			})
		});

	})
</script>